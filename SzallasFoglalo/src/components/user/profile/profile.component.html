<div class="profile-container">
  <div class="profile-wrapper">
    
    <!-- Header -->
    <div class="profile-header">
      <h1 class="profile-title">Profil BeÃ¡llÃ­tÃ¡sok</h1>
      <p class="profile-subtitle">MÃ³dosÃ­tsd a szemÃ©lyes adataidat Ã©s jelszavadat</p>
    </div>

    <!-- Success Message -->
    <div *ngIf="successMessage" class="success-message">
      <span>âœ“</span> {{ successMessage }}
    </div>

    <!-- Error Message -->
    <div *ngIf="errorMessage" class="error-message">
      <span>âœ•</span> {{ errorMessage }}
    </div>

    <!-- Profile Section -->
    <div class="profile-section">
      <h2 class="section-title">SzemÃ©lyes Adatok</h2>
      
      <form [formGroup]="profileForm" (ngSubmit)="updateProfile()" class="profile-form">
        
        <!-- Name Field -->
        <div class="form-group">
          <label class="form-label">Teljes NÃ©v</label>
          <input 
            type="text" 
            class="form-input"
            formControlName="name"
            placeholder="Ãrd be a nevedet"
            [class.input-error]="profileForm.get('name')?.invalid && profileForm.get('name')?.touched"
          />
          <span 
            *ngIf="profileForm.get('name')?.invalid && profileForm.get('name')?.touched" 
            class="error-text"
          >
            A nÃ©v legalÃ¡bb 3 karakter hosszÃº kell legyen!
          </span>
        </div>

        <!-- Email Field -->
        <div class="form-group">
          <label class="form-label">Email CÃ­m</label>
          <input 
            type="email" 
            class="form-input"
            formControlName="email"
            placeholder="email@example.com"
            [class.input-error]="profileForm.get('email')?.invalid && profileForm.get('email')?.touched"
          />
          <span 
            *ngIf="profileForm.get('email')?.invalid && profileForm.get('email')?.touched" 
            class="error-text"
          >
            {{ getEmailErrorMessage() }}
          </span>
        </div>

        <!-- Submit Button -->
        <button 
          type="submit" 
          class="submit-button"
          [disabled]="profileForm.invalid || isLoading"
        >
          <span *ngIf="!isLoading">Profil FrissÃ­tÃ©se</span>
          <span *ngIf="isLoading" class="loading-spinner">FrissÃ­tÃ©s...</span>
        </button>
      </form>
    </div>

    <!-- Password Section -->
    <div class="profile-section">
      <h2 class="section-title">JelszÃ³ MÃ³dosÃ­tÃ¡sa</h2>
      
      <form [formGroup]="passwordForm" (ngSubmit)="updatePassword()" class="password-form">
        
        <!-- Current Password -->
        <div class="form-group">
          <label class="form-label">Jelenlegi JelszÃ³</label>
          <div class="password-input-wrapper">
            <input 
              [type]="showCurrentPassword ? 'text' : 'password'" 
              class="form-input"
              formControlName="currentPassword"
              placeholder="Ãrd be a jelenlegi jelszavadat"
              [class.input-error]="passwordForm.get('currentPassword')?.invalid && passwordForm.get('currentPassword')?.touched"
            />
            <button 
              type="button" 
              class="password-toggle"
              (click)="togglePasswordVisibility('current')"
              tabindex="-1"
            >
              {{ showCurrentPassword ? 'ğŸ‘ï¸' : 'ğŸ‘ï¸â€ğŸ—¨ï¸' }}
            </button>
          </div>
          <span 
            *ngIf="passwordForm.get('currentPassword')?.invalid && passwordForm.get('currentPassword')?.touched" 
            class="error-text"
          >
            A jelenlegi jelszÃ³ megadÃ¡sa kÃ¶telezÅ‘!
          </span>
        </div>

        <!-- New Password -->
        <div class="form-group">
          <label class="form-label">Ãšj JelszÃ³</label>
          <div class="password-input-wrapper">
            <input 
              [type]="showNewPassword ? 'text' : 'password'" 
              class="form-input"
              formControlName="newPassword"
              placeholder="Ãrd be az Ãºj jelszavadat"
              [class.input-error]="passwordForm.get('newPassword')?.invalid && passwordForm.get('newPassword')?.touched"
            />
            <button 
              type="button" 
              class="password-toggle"
              (click)="togglePasswordVisibility('new')"
              tabindex="-1"
            >
              {{ showNewPassword ? 'ğŸ‘ï¸' : 'ğŸ‘ï¸â€ğŸ—¨ï¸' }}
            </button>
          </div>
          <span 
            *ngIf="passwordForm.get('newPassword')?.invalid && passwordForm.get('newPassword')?.touched" 
            class="error-text"
          >
            {{ getPasswordErrorMessage() }}
          </span>
          <div class="password-requirements">
            <p>A jelszÃ³ kÃ¶vetelmÃ©nyei:</p>
            <ul>
              <li [class.met]="passwordForm.get('newPassword')?.value && passwordForm.get('newPassword')?.value.length >= 8">
                âœ“ LegalÃ¡bb 8 karakter
              </li>
              <li [class.met]="passwordForm.get('newPassword')?.value && /[a-z]/.test(passwordForm.get('newPassword')?.value)">
                âœ“ Tartalmaz kisbetÅ±t
              </li>
              <li [class.met]="passwordForm.get('newPassword')?.value && /[A-Z]/.test(passwordForm.get('newPassword')?.value)">
                âœ“ Tartalmaz nagybetÅ±t
              </li>
              <li [class.met]="passwordForm.get('newPassword')?.value && /\d/.test(passwordForm.get('newPassword')?.value)">
                âœ“ Tartalmaz szÃ¡mot
              </li>
            </ul>
          </div>
        </div>

        <!-- Confirm Password -->
        <div class="form-group">
          <label class="form-label">JelszÃ³ MegerÅ‘sÃ­tÃ©se</label>
          <div class="password-input-wrapper">
            <input 
              [type]="showConfirmPassword ? 'text' : 'password'" 
              class="form-input"
              formControlName="confirmPassword"
              placeholder="IsmÃ©teld meg az Ãºj jelszavadat"
              [class.input-error]="passwordForm.get('confirmPassword')?.invalid && passwordForm.get('confirmPassword')?.touched"
            />
            <button 
              type="button" 
              class="password-toggle"
              (click)="togglePasswordVisibility('confirm')"
              tabindex="-1"
            >
              {{ showConfirmPassword ? 'ğŸ‘ï¸' : 'ğŸ‘ï¸â€ğŸ—¨ï¸' }}
            </button>
          </div>
          <span 
            *ngIf="passwordForm.get('confirmPassword')?.invalid && passwordForm.get('confirmPassword')?.touched" 
            class="error-text"
          >
            A jelszÃ³ megerÅ‘sÃ­tÃ©se kÃ¶telezÅ‘!
          </span>
          <span 
            *ngIf="passwordForm.hasError('passwordMismatch') && passwordForm.get('confirmPassword')?.touched" 
            class="error-text"
          >
            A jelszavak nem egyeznek!
          </span>
        </div>

        <!-- Submit Button -->
        <button 
          type="submit" 
          class="submit-button"
          [disabled]="passwordForm.invalid || isLoading"
        >
          <span *ngIf="!isLoading">JelszÃ³ MÃ³dosÃ­tÃ¡sa</span>
          <span *ngIf="isLoading" class="loading-spinner">MÃ³dosÃ­tÃ¡s...</span>
        </button>
      </form>
    </div>

  </div>
</div>